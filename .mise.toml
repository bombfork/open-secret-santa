[tools]
python = "latest"

[tasks.dev]
description = "Start local development server"
run = """
echo "Starting server on http://localhost:8000"
trap 'echo "\nServer stopped"; exit 0' SIGINT
python -m http.server 8000
"""

[tasks.test]
description = "Open the application in browser after starting server"
run = """
echo "Starting server on http://localhost:8000"
trap 'kill $SERVER_PID 2>/dev/null; echo "\nServer stopped"; exit 0' SIGINT
python -m http.server 8000 > /dev/null 2>&1 &
SERVER_PID=$!
echo "Server starting on http://localhost:8000"
sleep 2
if command -v xdg-open > /dev/null; then
  xdg-open http://localhost:8000
elif command -v open > /dev/null; then
  open http://localhost:8000
else
  echo "Please open http://localhost:8000 in your browser"
fi
echo "Press Ctrl+C to stop the server"
wait $SERVER_PID
"""
